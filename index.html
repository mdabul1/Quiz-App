<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Abul Quiz App</title>

<style>
* { box-sizing: border-box; }

body {
    margin: 0;
    min-height: 100vh;
    display: flex;
    justify-content: center;
    align-items: center;
    background: linear-gradient(135deg, #0f2027, #203a43, #2c5364);
    font-family: 'Segoe UI', sans-serif;
    color: #fff;
}

.card {
    width: 90%;
    max-width: 850px;
    padding: 40px;
    border-radius: 25px;
    background: rgba(255,255,255,0.12);
    backdrop-filter: blur(20px);
    box-shadow: 0 30px 60px rgba(0,0,0,0.4);
}

.title {
    text-align: center;
    font-size: 2.7rem;
    margin-bottom: 10px;
    background: linear-gradient(to right, #00ffcc, #00c3ff);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
}

.subtitle {
    text-align: center;
    opacity: 0.8;
    margin-bottom: 30px;
}

.start-form {
    display: flex;
    flex-direction: column;
    gap: 20px;
}

.start-form input {
    padding: 14px 18px;
    border-radius: 12px;
    border: none;
    font-size: 1.1rem;
    outline: none;
}

.btn {
    padding: 15px 40px;
    border-radius: 40px;
    border: none;
    font-size: 1.2rem;
    font-weight: bold;
    cursor: pointer;
    background: linear-gradient(135deg, #00ffcc, #00c3ff);
    color: #003333;
    box-shadow: 0 10px 25px rgba(0,255,204,0.4);
    transition: 0.3s;
}

.btn:hover { transform: scale(1.07); }

.btn:disabled {
    opacity: 0.4;
    cursor: not-allowed;
    transform: none;
}

.timer {
    position: absolute;
    top: 20px;
    right: 30px;
    background: rgba(255,255,255,0.15);
    padding: 12px 18px;
    border-radius: 12px;
    font-weight: bold;
    color: #ff6b6b;
}

.student-info {
    margin-bottom: 15px;
    font-size: 1rem;
    opacity: 0.9;
}

.question {
    font-size: 1.8rem;
    margin-bottom: 20px;
}

.options label {
    display: flex;
    gap: 12px;
    padding: 14px 18px;
    margin-bottom: 12px;
    border-radius: 14px;
    background: rgba(255,255,255,0.1);
    cursor: pointer;
    transition: 0.3s;
}

.options label:hover {
    background: rgba(0,255,200,0.2);
    transform: translateX(5px);
}

.options label.correct {
    background: rgba(0, 255, 0, 0.3);
    border: 2px solid #00ff00;
}

.options label.wrong {
    background: rgba(255, 0, 0, 0.3);
    border: 2px solid #ff0000;
}

input[type="radio"] {
    transform: scale(1.3);
    accent-color: #00ffcc;
}

.nav-buttons {
    display: flex;
    justify-content: center;
    gap: 25px;
    margin-top: 30px;
    flex-wrap: wrap;
}

.score-display {
    font-size: 4rem;
    font-weight: bold;
    color: #00ffcc;
    margin: 20px 0;
}
</style>
</head>

<body>

<div class="timer" id="timerBox" style="display:none;">
    ‚è≥ <span id="timer">30</span>s left
</div>

<div class="card" id="startScreen">
    <h1 class="title">Let‚Äôs Get You In</h1>
    <p class="subtitle">Fill this real quick & then let‚Äôs test that brain üß†</p>

    <form class="start-form" id="startForm">
        <input type="text" id="name" placeholder="Your name üëÄ" required>
        <input type="text" id="branch" placeholder="Your branch üí™" required>
        <input type="text" id="regno" placeholder="Reg. Number üßæ" required>
        <button class="btn" type="submit">Start Quiz üî•</button>
    </form>
</div>

<div class="card" id="quizScreen" style="display:none;">
    <div class="student-info" id="studentInfo"></div>

    <p>Question <span id="qNum">1</span></p>
    <div class="question" id="question"></div>

    <form class="options" id="options"></form>

    <div class="nav-buttons">
        <button class="btn" type="button" onclick="prevQ()">Previous</button>
        <button class="btn" id="submitBtn" type="button" onclick="submitQuiz()" style="display: none;">
            Submit üöÄ
        </button>
        <button class="btn" id="nextBtn" type="button" onclick="nextQ()">Next</button>
    </div>
</div>

<div class="card" id="scoreScreen" style="display:none; text-align: center;">
    <h1 class="title">Quiz Complete! </h1>
    <div class="student-info" id="finalStudentInfo"></div>
    <div class="score-display">
        <span id="finalScore">0</span>/<span id="totalMarks">0</span>
    </div>
    <p id="feedbackText" style="font-size: 1.2rem; margin-bottom: 30px;"></p>
    <button class="btn" onclick="location.reload()">Restart Quiz üîÑ</button>
</div>

<script>
const questions = [
    {
        q: "CSS stands for",
        options: [
            "Computer Style Sheet",
            "Cascading Style Sheets",
            "Creative Style Sheet",
            "Color Style Sheet"
        ],
        correct: 1
    },
    {
        q: "JavaScript is a",
        options: [
            "Compiled language",
            "Markup language",
            "Scripting language",
            "Styling language"
        ],
        correct: 2
    },
    {
        q: "JavaScript is used to make a website",
        options: [
            "Colorful",
            "Stylish",
            "Interactive",
            "Static"
        ],
        correct: 2
    },
    {
        q: "Which keyword is used to declare a variable?",
        options: [
            "int",
            "string",
            "var",
            "define"
        ],
        correct: 2
    },
    {
        q: "Which function shows a popup message?",
        options: [
            "msg()",
            "popup()",
            "alert()",
            "message()"
        ],
        correct: 2
    },
    {
        q: "Which symbol is used for comments in JavaScript?",
        options: [
            "<!-- -->",
            "#",
            "//",
            "**"
        ],
        correct: 2
    },
    {
        q: "What does console.log() do?",
        options: [
            "Shows output on screen",
            "Prints on paper",
            "Displays output in console",
            "Saves data"
        ],
        correct: 2
    },
    {
        q: "Which property changes background color?",
        options: [
            "color",
            "bg-color",
            "background-color",
            "background"
        ],
        correct: 2
    },
    {
        q: "Which symbol selects a class in CSS?",
        options: [
            "#",
            ".",
            "*",
            "$"
        ],
        correct: 1
    },
    {
        q: "Which property is used to change text size?",
        options: [
            "text-size",
            "font-size",
            "size",
            "font-style"
        ],
        correct: 1
    }
];

// Shuffle function to randomize the order of questions
function shuffleArray(array) {
    for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
    }
}

// Shuffle the questions array
shuffleArray(questions);

const marksPerQuestion = 10;
const totalMarks = questions.length * marksPerQuestion;

let index = 0;
let answers = new Array(questions.length).fill(null);
let visited = new Array(questions.length).fill(false);
let time = 30;
let timer;

document.getElementById("startForm").onsubmit = e => {
    e.preventDefault();

    const name = document.getElementById("name").value;
    const branch = document.getElementById("branch").value;
    const reg = document.getElementById("regno").value;

    document.getElementById("startScreen").style.display = "none";
    document.getElementById("quizScreen").style.display = "block";
    document.getElementById("timerBox").style.display = "block";

    const infoString = `Name: ${name} | Branch: ${branch} | Reg No: ${reg}`;
    document.getElementById("studentInfo").innerText = infoString;
    document.getElementById("finalStudentInfo").innerText = infoString;

    loadQ();
};

function startTimer() {
    clearInterval(timer);
    time = 30;
    document.getElementById("timer").innerText = time;

    timer = setInterval(() => {
        time--;
        document.getElementById("timer").innerText = time;
        if (time === 0) {
            if (index === questions.length - 1) {
                save();
                checkSubmitAccess();
                clearInterval(timer);
            } else {
                nextQ();
            }
        }
    }, 1000);
}

function loadQ() {
    startTimer();
    visited[index] = true; 

    document.getElementById("qNum").innerText = index + 1;
    document.getElementById("question").innerText = questions[index].q;

    const nextBtn = document.getElementById("nextBtn");
    if (index === questions.length - 1) {
        nextBtn.style.display = "none";
    } else {
        nextBtn.style.display = "inline-block";
    }

    const opt = document.getElementById("options");
    opt.innerHTML = "";

    questions[index].options.forEach((text, i) => {
        opt.innerHTML += `
            <label class="${answers[index] !== null && i == questions[index].correct ? 'correct' : (answers[index] == i && i != questions[index].correct ? 'wrong' : '')}">
                <input type="radio" name="ans" value="${i}" ${answers[index] == i ? "checked" : ""}>
                ${text}
            </label>
        `;
    });

    // Add event listeners to radios for immediate feedback
    const radios = opt.querySelectorAll('input[type="radio"]');
    const labels = opt.querySelectorAll('label');
    radios.forEach((radio, i) => {
        radio.addEventListener('change', () => {
            // Reset all labels
            labels.forEach(label => {
                label.classList.remove('correct', 'wrong');
            });
            // Apply classes
            if (i == questions[index].correct) {
                labels[i].classList.add('correct');
            } else {
                labels[i].classList.add('wrong');
                labels[questions[index].correct].classList.add('correct');
            }
        });
    });

    checkSubmitAccess(); // Check if button should appear
}

function save() {
    const selected = document.querySelector('input[name="ans"]:checked');
    if (selected) answers[index] = selected.value;
}

function nextQ() {
    save();
    if (index < questions.length - 1) {
        index++;
        loadQ();
    }
}

function prevQ() {
    save();
    if (index > 0) {
        index--;
        loadQ();
    }
}

// Logic: Submit button appears only when all questions have been seen
function checkSubmitAccess() {
    const allVisited = visited.every(v => v === true);
    const submitBtn = document.getElementById("submitBtn");
    
    if (allVisited) {
        submitBtn.style.display = "inline-block";
        submitBtn.disabled = false;
    } else {
        submitBtn.style.display = "none";
    }
}

function submitQuiz() {
    save();

    if (!visited.every(v => v)) {
        alert("üëÄ Hold up!\nReview all questions once before submitting üòé");
        return;
    }

    clearInterval(timer);
    document.getElementById("quizScreen").style.display = "none";
    document.getElementById("timerBox").style.display = "none";
    document.getElementById("scoreScreen").style.display = "block";

    let score = 0;
    answers.forEach((a, i) => {
        if (a == questions[i].correct) score += marksPerQuestion;
    });

    document.getElementById("finalScore").innerText = score;
    document.getElementById("totalMarks").innerText = totalMarks;

    const feedback = document.getElementById("feedbackText");
    if (score === totalMarks) {
        feedback.innerText = "Wow! You're a genius! üåü";
    } else if (score >= totalMarks / 2) {
        feedback.innerText = "Solid effort! You know your stuff. üìö";
    } else {
        feedback.innerText = "Good try! Time for a quick review? üîÅ";
    }
}
</script>

</body>
</html>
